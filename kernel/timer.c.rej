***************
*** 1301,1306 ****
  	run_posix_cpu_timers(p);
  }
  
  /*
   * This function runs timers and the timer-tq in bottom half context.
   */
--- 1301,1325 ----
  	run_posix_cpu_timers(p);
  }
  
+ #ifdef CONFIG_IPIPE
+ 
+ void update_root_process_times(struct pt_regs *regs)
+ {
+ 	int cpu, user_tick = user_mode(regs);
+ 
+ 	if (__ipipe_root_tick_p(regs)) {
+ 		update_process_times(user_tick);
+ 		return;
+ 	}
+ 
+ 	run_local_timers();
+ 	cpu = smp_processor_id();
+ 	rcu_check_callbacks(cpu, user_tick);
+ 	run_posix_cpu_timers(current);
+ }
+ 
+ #endif
+ 
  /*
   * This function runs timers and the timer-tq in bottom half context.
   */
