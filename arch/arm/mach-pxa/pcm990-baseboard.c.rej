***************
*** 25,30 ****
  #include <linux/i2c.h>
  #include <linux/i2c/pxa-i2c.h>
  #include <linux/pwm_backlight.h>
  
  #include <media/soc_camera.h>
  
--- 25,31 ----
  #include <linux/i2c.h>
  #include <linux/i2c/pxa-i2c.h>
  #include <linux/pwm_backlight.h>
+ #include <linux/ipipe.h>
  
  #include <media/soc_camera.h>
  
***************
*** 269,275 ****
  		desc->irq_data.chip->irq_ack(&desc->irq_data);
  		if (likely(pending)) {
  			irq = PCM027_IRQ(0) + __ffs(pending);
- 			generic_handle_irq(irq);
  		}
  		pending = (~PCM990_INTSETCLR) & pcm990_irq_enabled;
  	} while (pending);
--- 270,276 ----
  		desc->irq_data.chip->irq_ack(&desc->irq_data);
  		if (likely(pending)) {
  			irq = PCM027_IRQ(0) + __ffs(pending);
+ 			ipipe_handle_chained_irq(irq);
  		}
  		pending = (~PCM990_INTSETCLR) & pcm990_irq_enabled;
  	} while (pending);
