***************
*** 461,469 ****
   */
  	.align	5
  ENTRY(cpu_xscale_switch_mm)
  	clean_d_cache r1, r2
  	mcr	p15, 0, ip, c7, c5, 0		@ Invalidate I cache & BTB
  	mcr	p15, 0, ip, c7, c10, 4		@ Drain Write (& Fill) Buffer
  	mcr	p15, 0, r0, c2, c0, 0		@ load page table pointer
  	mcr	p15, 0, ip, c8, c7, 0		@ invalidate I & D TLBs
  	cpwait_ret lr, ip
--- 461,478 ----
   */
  	.align	5
  ENTRY(cpu_xscale_switch_mm)
+ #ifdef CONFIG_ARM_FCSE_BEST_EFFORT
+ 	cmp	r2, #0
+ 	beq	2f
+ #endif /* CONFIG_ARM_FCSE_BEST_EFFORT */
+ #ifndef CONFIG_ARM_FCSE_GUARANTEED
  	clean_d_cache r1, r2
  	mcr	p15, 0, ip, c7, c5, 0		@ Invalidate I cache & BTB
  	mcr	p15, 0, ip, c7, c10, 4		@ Drain Write (& Fill) Buffer
+ #endif /* CONFIG_ARM_FCSE_GUARANTEED */
+ #ifdef CONFIG_ARM_FCSE_BEST_EFFORT
+ 2:
+ #endif /* !CONFIG_ARM_FCSE_GUARANTEED */
  	mcr	p15, 0, r0, c2, c0, 0		@ load page table pointer
  	mcr	p15, 0, ip, c8, c7, 0		@ invalidate I & D TLBs
  	cpwait_ret lr, ip
