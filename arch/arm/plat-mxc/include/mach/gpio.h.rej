***************
*** 43,49 ****
  	int virtual_irq_start;
  	struct gpio_chip chip;
  	u32 both_edges;
- 	spinlock_t lock;
  };
  
  #define DEFINE_IMX_GPIO_PORT_IRQ_HIGH(soc, _id, _hwid, _irq, _irq_high)	\
--- 43,52 ----
  	int virtual_irq_start;
  	struct gpio_chip chip;
  	u32 both_edges;
+ 	ipipe_spinlock_t lock;
+ #ifdef CONFIG_IPIPE
+ 	unsigned nonroot_gpios;
+ #endif /* CONFIG_IPIPE */
  };
  
  #define DEFINE_IMX_GPIO_PORT_IRQ_HIGH(soc, _id, _hwid, _irq, _irq_high)	\
